<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Challenge Recursiva - abril 2024 </title>
  </head>

  <body>
    <h2>Obtención de estadísticas de socios del club.</h2>

    <form action="/uploadCsv" enctype="multipart/form-data" method="POST">
      <label for="fileUpload">Subir archivo .csv:</label>
      <input type="file" name="fileName" accept=".csv"/> <br /><br />
      <input type="submit" value="Submit" />
    </form>

  </body>
  <script>     

    // Attach a submit handler to the form 
  // Attach a submit handler to the form 


$("#uploadForm").submit(function(event) {

    var formData = new FormData();
    formData.append("uploadFiles", $('[name="file"]')[0].files[0]);
    event.stopPropagation();
    event.preventDefault();
    $.ajax({
      url: $(this).attr("action"),
      data: formData,
      processData: false,
      contentType: false,
      type: 'POST',
      success: function(data) {
        alert(data);
        loadFiles()
      }
    });
    return false;
  });

    </script>

  
</html>